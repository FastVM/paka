def kolakoski(self, len) {
    s = [nil] * len;
    i = 0;
    k = 0;
    while (i < len) {
        s.[i] = self.[k % arr.len(self)];
        if (s.[k] > 1) {
            j = s.[k]-1;
            while (j > 0) {
                i += 1;
                if (i != len) {
                    s.[i] = s.[i-1];
                };
                j -= 1;
            };
        };
        k += 1; 
        i += 1;
    };
    return s;
};

kolakoski([1, 2], 100000);